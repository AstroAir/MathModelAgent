<script setup lang="ts">
import AgentWorkflowStatus from "@/components/AgentWorkflowStatus.vue";
import {
	Dialog,
	DialogContent,
	DialogHeader,
	DialogTitle,
} from "@/components/ui/dialog";
import { Network } from "lucide-vue-next";

interface AgentStatus {
	name: string;
	status: "pending" | "running" | "completed" | "error";
	icon: string;
	description: string;
}

defineProps<{
	open: boolean;
	agents: AgentStatus[];
}>();

defineEmits<(e: "update:open", value: boolean) => void>();
</script>

<template>
  <Dialog :open="open" @update:open="$emit('update:open', $event)">
    <DialogContent class="max-w-2xl max-h-[80vh] overflow-hidden flex flex-col">
      <DialogHeader>
        <DialogTitle class="flex items-center gap-2 text-xl">
          <Network class="w-6 h-6 text-primary" />
          <span class="text-gradient">
            å·¥ä½œæµç¨‹çŠ¶æ€
          </span>
        </DialogTitle>
      </DialogHeader>

      <div class="flex-1 overflow-y-auto px-2 py-4">
        <AgentWorkflowStatus :agents="agents" />

        <!-- å·¥ä½œæµç¨‹è¯´æ˜ -->
        <div class="mt-6 p-4 bg-muted/50 rounded-lg border border-border">
          <h4 class="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
            <span class="w-1.5 h-1.5 bg-primary rounded-full"></span>
            å·¥ä½œæµç¨‹è¯´æ˜
          </h4>
          <div class="space-y-2 text-xs text-muted-foreground">
            <div class="flex items-start gap-2">
              <span class="text-lg shrink-0">ğŸ¯</span>
              <div>
                <span class="font-semibold">Coordinatorï¼š</span>
                åˆ†æä»»åŠ¡éœ€æ±‚ï¼Œåˆ¶å®šæ•´ä½“è®¡åˆ’
              </div>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-lg shrink-0">ğŸ§®</span>
              <div>
                <span class="font-semibold">ModelerAgentï¼š</span>
                è®¾è®¡æ•°å­¦å»ºæ¨¡æ–¹æ¡ˆå’Œç®—æ³•
              </div>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-lg shrink-0">ğŸ‘¨â€ğŸ’»</span>
              <div>
                <span class="font-semibold">CoderAgentï¼š</span>
                å®ç°ä»£ç å¹¶æ‰§è¡Œè®¡ç®—
              </div>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-lg shrink-0">âœï¸</span>
              <div>
                <span class="font-semibold">WriterAgentï¼š</span>
                æ’°å†™å®Œæ•´çš„ç ”ç©¶è®ºæ–‡
              </div>
            </div>
          </div>
        </div>
      </div>
    </DialogContent>
  </Dialog>
</template>
